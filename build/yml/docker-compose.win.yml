version: '3'

services:
  sql.data:
    image: microsoft/mssql-server-windows-developer
    restart: on-failure
  rabbitmq:
    image: spring2/rabbitmq
    restart: on-failure
  muncode.munerp.accounting.api:
    image: muncode.munerp.accounting.api
    restart: on-failure
    build:
      context: ../output
      dockerfile: muncode.munerp.accounting.api.df
    depends_on:
      - sql.data
      - rabbitmq
  muncode.munerp.sales.api:
    image: muncode.munerp.sales.api
    restart: on-failure
    build:
      context: ../output
      dockerfile: muncode.munerp.sales.api.df
    depends_on:
      - sql.data
      - rabbitmq
  muncode.munerp.gateway:
    image: muncode.munerp.gateway
    restart: on-failure
    build:
      context: ../output
      dockerfile: muncode.munerp.gateway.df
    depends_on:
      - muncode.munerp.sales.api
      - muncode.munerp.accounting.api
      - rabbitmq